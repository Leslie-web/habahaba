<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <meta name="keywords" content=""/>
    <meta content='width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no' name='viewport'>

    {#    DATATABLE BUTTONS#}
    {#    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/jqc-1.12.4/dt-1.13.1/b-2.3.2/sl-1.5.0/datatables.min.css"/>#}
    {#<link rel="stylesheet" type="text/css" href="Editor-2.0.10/css/editor.dataTables.css">#}
    {# #}
    {#<script type="text/javascript" src="https://cdn.datatables.net/v/dt/jqc-1.12.4/dt-1.13.1/b-2.3.2/sl-1.5.0/datatables.min.js"></script>#}
    {#<script type="text/javascript" src="Editor-2.0.10/js/dataTables.editor.js"></script>#}
    {#    DATATABLE BUTTONS#}


    <link href="/static/_public/images/favicon.png" rel="shortcut icon">
    <link href="/static/_public/css/bootstrap.min.css" rel='stylesheet' type='text/css'/>
    {#    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.css' ) }}">#}
    <link href="/static/_public/css/font-awesome.css" rel="stylesheet">
    <link href="/static/_public/css/datepicker3.css" rel="stylesheet" type="text/css"/>
    <link href="/static/_public/css/select.css" rel="stylesheet" type="text/css"/>

    <link href="/static/_public/css/main.css" rel="stylesheet" type="text/css"/>
    <link href="/static/_public/css/skins/skin.css" rel="stylesheet" type="text/css"/>

    <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/css/select2.min.css" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="/static/_public/js/datatables/media/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="/static/_public/js/datatables/media/css/dataTables.semanticui.min.css">
    <link rel="stylesheet" type="text/css" href="/static/_public/js/datatables/media/css/semantic.min.css">
    <link rel="stylesheet" type="text/css"
          href="/static/_public/js/datatables/extensions/Responsive/css/responsive.dataTables.min.css" media="screen">
    <link rel="stylesheet" type="text/css"
          href="/static/_public/js/datatables/extensions/FixedHeader/css/fixedHeader.semanticui.min.css" media="screen">
    <link rel="stylesheet" type="text/css"
          href="/static/_public/js/datatables/extensions/Select/css/select.semanticui.min.css" media="screen">
    <link rel="stylesheet" type="text/css"
          href="/static/_public/js/datatables/extensions/Buttons/css/buttons.semanticui.min.css" media="screen">

    {#    chart JS#}
    <script type="text/javascript" src="/static/js/Chart.min.js"></script>

    <script src="/static/_public/js/jquery.min.js"></script>
    <script src="/static/_public/js/bootstrap.min.js" type="text/javascript"></script>

    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body class="promotions-dark sidebar-mini fixed layout-boxed">
<style>
    .farmers {
        transition: 300ms ease;
    }

    .farmers:hover {
        background-color: rgb(0 0 0 / 0.5);
    }
</style>
<div class="wrapper">

    <header class="main-header  no-print">
        <a href="{{ url_for('alan_code') }}" class="logo">
            <span class="logo-mini"><img src="/static/_public/images/maize_cob.png"
                                         style="height:50px !important"></span>
            <span class="logo-lg"><img src="/static/_public/images/maize_cob.png"
                                       style="height:54px !important"></span>
        </a>
        <!-- fixed-top navbar-static-top no-print -->
        <nav class="navbar" role="navigation">
            <a href="#" class="sidebar-toggle" data-toggle="offcanvas" role="button">
                <span class="sr-only">Toggle navigation</span>
            </a>
            {% block dashboard %}
                <section class="content-header" style="width: 93%; margin-left: 5.6%; padding-left: 0; ">
                    <h2>Dashboard</h2>
                    <ol class="breadcrumb">
                        <li><a href="{{ url_for('alan_code') }}"><i class="fa fa-dashboard"></i> Home</a></li>
                        <li class="active">Admin Dashboard</li>
                    </ol>
                </section>
            {% endblock %}
        </nav>
    </header>

    <aside class="main-sidebar">
        <section class="sidebar">
            <ul class="sidebar-menu">
                <li class="header">
                    <center>{#Save Pole Pole#}Haba haba</center>
                </li>
                <li><a href="{{ url_for('alan_code') }}"><span><i class="fa fa-windows"></i> Admin Dashboard</span></a>
                </li>


                <li class="header">
                    <center>Onboarding</center>
                </li>
                <li><a href="{{ url_for('vendor_onboarding') }}"><span><i
                        class="fa fa-book"></i> Vendor Onboarding</span></a>
                </li>
                {#                VENDOR SETUP#}
                <li class="header">
                    <center>Vendor Setup</center>
                </li>
                <li><a href="{{ url_for('admin_vendor_setup') }}"><span><i
                        class="fa fa-user"></i> Vendor Setup</span></a>
                </li>
                {#                VENDOR DETAILS#}
                <li class="header">
                    <center>Products & Offers</center>
                </li>
                <li><a href="{{ url_for('product_validation') }}"><span><i
                        class="fa fa-gift"></i> Vendor Products</span></a>
                </li>
                <li><a href="{{ url_for('validate_offers') }}"><span><i class="fa fa-tags"></i> Vendor Offers</span>
                </a></li>


                {#                products#}
                {#                <li class="header">#}
                {#                    <center>Products</center>#}
                {#                </li>#}

                <li><a href="{{ url_for('admin_product_categories') }}"><span><i
                        class="fa fa-th-list"></i> Product Categories</span></a>
                </li>

                {#                VENDOR SETTINGS#}
                <li class="header">
                    <center>Vendor Settings</center>
                </li>

                <li><a href="{{ url_for('admin_set_regions') }}"><span><i
                        class="fa fa-th-list"></i> Set Regions</span></a>
                </li>


                {#                reports#}
                <li class="header">
                    <center>Reports</center>
                </li>

                <li class="treeview">
                    <a href="#"><i class="fa fa-file-o"></i> <span>Reports</span><i
                            class="fa fa-angle-down pull-right"></i></a>
                    <ul class="treeview-menu">
                        <li><a href="{{ url_for('admin_customer_summary') }}"><span>Customer Summary</span> </a></li>
                        <li><a href="#"><span>Customer History</span> </a></li>
                    </ul>
                </li>

                <li class="header">
                    <center>Account</center>
                </li>

                <li class="treeview">
                    <a href="#"><i class="fa fa-users"></i> <span>Create User</span><i
                            class="fa fa-angle-down pull-right"></i></a>
                    <ul class="treeview-menu">
                        <li><a href="{{ url_for('admin_create_user') }}"><span>Create User</span> </a></li>
                        {#                        <li><a href="{{ url_for('admin_onboarding_users') }}"><span>User</span> </a></li>#}
                    </ul>
                </li>
                <li><a href="{{ url_for('admin_change_password') }}"><span><i
                        class="fa fa-exchange"></i> Change Pin</span>
                </a></li>
                <li><a href="{{ url_for('admin_logout') }}"> <i class="fa fa-lock"></i> <span>Log Out</span> </a></li>
            </ul>
        </section>
    </aside>

    <div class="content-wrapper no-print" style=" padding-left: 10px; padding-right: 10px; min-height: 600px">
        {#            <div class="flash">#}
        {#                {% include 'includes/flashmsg_bootstrap.html' %}#}
        {#            </div>#}

        {% block content %}
            <div class="popup" style="z-index: 5000;">
                <span class="popuptext" id="myPopup"><b id="mtext"></b> </span>
            </div>
            <div class="content-top-1 box box-success">
                <div class="box-body">
                    <div class="row">

                        <a href="{{ url_for('admin_view_users') }}">
                            <div class="col-lg-3">
                                <div class="info-box bg-orange farmers">
                                    <span class="info-box-icon"><i class="fa fa-users"></i></span>
                                    <div class="info-box-content">
                                        <span class="info-box-text">Registered <br> Farmers</span>
                                        <br>
                                        <span class="info-box-number" id="wholesalers">{{ users|count }}</span>
                                    </div>
                                </div>
                            </div>
                        </a>

                        <a href="{{ url_for('admin_view_vendors') }}">
                            <div class="col-lg-3">
                                <div class="info-box bg-navy-active">
                                    <span class="info-box-icon"><i class="fa fa-user"></i></span>
                                    <div class="info-box-content">
                                        <span class="info-box-text"> Vendor <br>List </span>
                                        <br>
                                        <span class="info-box-number" id="redeemed">{{ vendors|count }}</span>
                                    </div>
                                </div>
                            </div>
                        </a>

                        <a href="{{ url_for('admin_view_products') }}">
                            <div class="col-lg-3">
                                <div class="info-box bg-purple">
                                    <span class="info-box-icon"><i class="fa fa-gift"></i></span>
                                    <div class="info-box-content">
                                        <span class="info-box-text">Active <br> Products</span>
                                        <br>
                                        <span class="info-box-number" id="stpoints">{{ products|count }}</span>
                                    </div>
                                </div>
                            </div>
                        </a>

                        <a href="{{ url_for('admin_view_offers') }}">
                            <div class="col-lg-3">
                                <div class="info-box bg-green">
                                    <span class="info-box-icon"><i class="fa fa-tags"></i></span>
                                    <div class="info-box-content">
                                        <span class="info-box-text">Running <br> Offers</span>
                                        <br>
                                        <span class="info-box-number" id="scpoints">{{ offers|count }}</span>
                                    </div>
                                </div>
                            </div>
                        </a>

                        <a href="{{ url_for('admin_transactions') }}">
                            <div class="col-lg-3">
                                <div class="info-box bg-gray">
                                    <span class="info-box-icon"><i class="fa fa-bar-chart"></i></span>
                                    <div class="info-box-content">
                                        <span class="info-box-text">Transactions <br></span>
                                        <br>
                                        <span class="info-box-number" id="scpoints">{{ transactions|count }}</span>
                                    </div>
                                </div>
                            </div>
                        </a>
                    </div>

                </div>
            </div>
            <br>
            <div class="box" id="monthstat">
                <div class="box-body">
                    <h5 class="text-center">Earnings for the Last 12 months</h5>
                    {#<canvas id="myChart" width="400" height="120"></canvas>#}
                    {% include 'test_chart.html' %}
                </div>
            </div>
            <br>
            {#            <select class="form-control" required="required" name="subcategory" id="subcategory">#}
            {#                <option value="">Select Subcategory</option>#}
            {#                <option value="Car care products">Car care products</option>#}
            {#                <option value="Engine Oil Mono">Engine Oil Mono</option>#}
            {#                <option value="Engine Oil Multi – Mineral">Engine Oil Multi – Mineral</option>#}
            {#                <option value="Engine Oil Multi – Synthetic">Engine Oil Multi – Synthetic</option>#}
            {#                <option value="Gear Oils">Gear Oils</option>#}
            {#                <option value="Greases">Greases</option>#}
            {#                <option value="Specialties">Specialties</option>#}
            {#                <option value="Outright">Outright</option>#}
            {#                <option value="Refill">Refill</option>#}
            {#                <option value="Accessories">Accessories</option>#}
            {#            </select>#}

            </div>
            <!-- /.content-wrapper -->

            <footer class="main-footer  no-print">
                &copy;2022 All Rights Reserved,&nbsp;&nbsp;&nbsp;&nbsp;Powered by Mzawadi

            </footer>

            </div>
        {% endblock %}

<script type="text/javascript" src="/static/_public/js/mburu.js"></script>
<script type="text/javascript" src="/static/js/chart-area-demo.js"></script>
<script type="text/javascript" src="/static/js/Chart.min.js"></script>
<script>
    {#$(document).ready(function () {#}
    {#    $('select').select2();#}
    {#1});#}

    {#const ctx = document.getElementById('myCharts');#}
    {#const myCharts = new Chart(ctx, {#}
    {#    type: 'bar',#}
    {#    data: {#}
    {#        labels: ['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],#}
    {#        datasets: [{#}
    {#            label: '# of Votes',#}
    {#            data: [12, 19, 3, 5, 2, 3],#}
    {#            backgroundColor: [#}
    {#                'rgba(255, 99, 132, 0.2)',#}
    {#                'rgba(54, 162, 235, 0.2)',#}
    {#                'rgba(255, 206, 86, 0.2)',#}
    {#                'rgba(75, 192, 192, 0.2)',#}
    {#                'rgba(153, 102, 255, 0.2)',#}
    {#                'rgba(255, 159, 64, 0.2)'#}
    {#            ],#}
    {#            borderColor: [#}
    {#                'rgba(255, 99, 132, 1)',#}
    {#                'rgba(54, 162, 235, 1)',#}
    {#                'rgba(255, 206, 86, 1)',#}
    {#                'rgba(75, 192, 192, 1)',#}
    {#                'rgba(153, 102, 255, 1)',#}
    {#                'rgba(255, 159, 64, 1)'#}
    {#            ],#}
    {#            borderWidth: 1#}
    {#        }]#}
    {#    },#}
    {#    options: {#}
    {#        scales: {#}
    {#            y: {#}
    {#                beginAtZero: true#}
    {#            }#}
    {#        }#}
    {#    }#}
    {#1});#}

</script>
<script type="text/javascript">
    function listredemptions() {
        let table1 = $('#distributortable').DataTable({
            destroy: true,
            responsive: false,
            "ajax": {
                url: '/tables/leta_redemption_all',
                type: 'get'
            },
            select: {
                style: 'none'
            },
            language: {
                searchPlaceholder: "Search records.."
            },
            scrollY: "800px",
            scrollX: true,
            scrollCollapse: true,
            paging: true,
            fixedColumns: true,
            lengthChange: true,
            buttons: ['excelHtml5', 'pdfHtml5'],
            "rowCallback": function (nRow, aData) {
            },
            "footerCallback": function (row, data, start, end, display) {
            }
        });
        let buttons = new $.fn.dataTable.Buttons(table1, {
            buttons: ['excelHtml5', 'pdfHtml5']
        });
        buttons.container().appendTo($('div.right.aligned.eight.column:eq(0)', table1.table().container()));
    }

    function topEarnings() {
        let table1 = $('#earnings').DataTable({
            destroy: true,
            responsive: false,
            "ajax": {
                url: '/tables/leta_top_earners',
                type: 'get'
            },
            select: {
                style: 'single'
            },
            "order": [[2, "desc"]],
            language: {
                searchPlaceholder: "Search records.."
            },
            scrollY: "800px",
            scrollX: true,
            scrollCollapse: true,
            paging: true,
            fixedColumns: true,
            lengthChange: true,
            buttons: ['excelHtml5', 'pdfHtml5'],
            "rowCallback": function (nRow, aData) {
            },
            "footerCallback": function (row, data, start, end, display) {
            }
        });
    }

    function leastEarnings() {
        let table1 = $('#distributortable').DataTable({
            destroy: true,
            responsive: false,
            "ajax": {
                url: '/tables/leta_top_earners/asc',
                type: 'get'
            },
            "order": [[2, "asc"]],
            select: {
                style: 'single'
            },
            language: {
                searchPlaceholder: "Search records.."
            },
            scrollY: "800px",
            scrollX: true,
            scrollCollapse: true,
            paging: true,
            fixedColumns: true,
            lengthChange: true,
            buttons: ['excelHtml5', 'pdfHtml5'],
            "rowCallback": function (nRow, aData) {
            },
            "footerCallback": function (row, data, start, end, display) {
            }
        });
    }

    $(document).ready(function () {

            {#$.ajax({#}
            {#    url: "/tables/outlets_all",#}
            {#    type: "get",#}
            {#    success: function (data) {#}
            {#        let data = JSON.parse(data).aaData;#}
            {#        $("#wholesalers").html(data[0])#}
            {#    }#}
            // })            ;
            //}
            {##}
            {#$.ajax({#}
            {#    url: "/tables/leta_points_balance",#}
            {#    type: "get",#}
            {#    success: function (data) {#}
            {#        let data = JSON.parse(data).aaData;#}
            {#        let f = data[0];#}
            {#        $("#stpoints").html((f[1] == null ? 0 : f[1]).toLocaleString());#}
            {#        $("#scpoints").html((f[0] == null ? 0 : f[0]).toLocaleString());#}
            {#    }#}
            //})                ;

            {##}
            {#$.ajax({#}
            {#    url: "/tables/leta_redemed_points",#}
            {#    type: "get",#}
            {#    success: function (data) {#}
            {#        let data = JSON.parse(data).aaData;#}
            {#        let f = data[0];#}
            {#        $("#redeemed").html((f[1] == null ? 0 : f[1]).toLocaleString());#}
            {#    }#}
            //})   ;

            {##}
            {#$.ajax({#}
            {#    url: "/tables/leta_chart",#}
            {#    type: "get",#}
            {#    success: function (data) {#}
            {#        let data = JSON.parse(data).aaData;#}
            {#        let f = data;#}
            {#        let data = [];#}
            {#        let labels = [];#}
            {#        for (let i = 0; i < f.length; i++) {#}
            {#            let m = f[i];#}
            {#            data.push(parseFloat(m[1]));#}
            {#            labels.push(m[0]);#}
            {#        }#}
            {##}
            {#        let chart = drawChart(chart, 'line', 'myChart', data, labels, dynamicColors(), "Points Earned", true)#}
            {#    }#}
            //});


            {#topEarnings();#}
            {#leastEarnings();#}

        }
    );

    function mysession() {
        $.ajax({
            type: "get",
            url: '/Loyalty/checksesssion',
            success: function (data) {
                let d = JSON.parse(data);
                if (String(d.state) == "timeout")
                    window.location.href = "/timeout";
            },
            error: function (data) {
            }
        });
        let timeout = setTimeout(mysession, 60000);
    }

    function mynotifications() {
        $.ajax({
            type: "get",
            url: '/Loyalty/notifications',
            success: function (data) {

                let json = JSON.parse(data);
                if (json.result == "ok") {
                    let mdata = json.message;
                    $("#mtext").html(" " + mdata.message + ' <button type="button" id="mclose" onclick="dismiss()" class="mclose pull-right" data-dismiss="alert" aria-label="Close" style="background: #000; border: none; margin-right: 5px">X</button>');
                    $("#myPopup").removeClass("hide");
                    $("#myPopup").addClass("show");
                }
            }
        });
        let timeout = setTimeout(mynotifications, 15000);
    }

    function dismiss() {
        $("#myPopup").removeClass("show");
        $("#myPopup").addClass("hide");
    }

    $(document).ready(function () {
            {#mysession();#}
            {#mynotifications();#}
            {#$('select').select2();#}
            {##}
            {#$('.sidebar-menu li').removeClass('active');#}
            {#$('.<?=$this->uri->segment(3);?>').addClass('active');#}
            {##}
            {#$(".sidebar").slimScroll({destroy: true}).height("auto");#}
            {#//Add slimscroll#}
            {#$(".sidebar").slimscroll({#}
            {#    height: ($(window).height() - $(".main-header").height()) + "px",#}
            {#    color: "#ff0000",#}
            {#    alwaysVisible: false,#}
            {#    size: "20px"#}
            //});

        }
    );

</script>

<script src="/static/_public/js/app.min.js" type="text/javascript"></script>
<script src="/static/_public/js/moment.js" type="text/javascript"></script>
<script src="/static/_public/js/datepicker.js" type="text/javascript"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.1/js/select2.min.js"></script>

<script type="text/javascript" src="/static/_public/js/Chart.bundle.min.js"></script>
<script type="text/javascript" src="/static/_public/js/utils.js"></script>
<script type="text/javascript" src="/static/_public/js/select.js"></script>
<script type="text/javascript" src="/static/_public/js/jquery.easy-autocomplete.min.js"></script>
<script type="text/javascript" src="/static/_public/js/jquery.slimscroll.min.js"></script>

{#EDITOR#}
<script type="text/javascript" src="/static/js/dataTables.editor.min.js"></script>

<script type="text/javascript"
        src="/static/_public/js/datatables/media/js/jquery.dataTables.min.js"></script>
<script type="text/javascript"
        src="/static/_public/js/datatables/media/js/dataTables.semanticui.min.js"></script>
<script type="text/javascript"
        src="/static/_public/js/datatables/extensions/Responsive/js/dataTables.responsive.min.js"></script>
<script type="text/javascript"
        src="/static/_public/js/datatables/extensions/FixedHeader/js/dataTables.fixedHeader.min.js"></script>
<script type="text/javascript"
        src="/static/_public/js/datatables/extensions/Select/js/dataTables.select.min.js"></script>

<script type="text/javascript"
        src="/static/_public/js/datatables/extensions/Buttons/js/dataTables.buttons.min.js"></script>
<script type="text/javascript"
        src="/static/_public/js/datatables/extensions/Buttons/js/buttons.semanticui.min.js"></script>

<script type="text/javascript"
        src="/static/_public/js/datatables/extensions/Buttons/js/jszip.min.js"></script>
<script type="text/javascript"
        src="//cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.32/pdfmake.min.js"></script>
<script type="text/javascript"
        src="/static/_public/js/datatables/extensions/Buttons/js/vfs_fonts.js"></script>

<script type="text/javascript"
        src="/static/_public/js/datatables/extensions/Buttons/js/buttons.html5.min.js"></script>
<script type="text/javascript"
        src="/static/_public/js/datatables/extensions/Buttons/js/buttons.print.min.js"></script>
<script type="text/javascript"
        src="/static/_public/js/datatables/extensions/Buttons/js/buttons.colVis.min.js"></script>
<script type="text/javascript" src="/static/_public/js/datatables/media/js/semanticui.js"></script>
</body>
</html>