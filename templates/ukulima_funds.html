<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Funds</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='/css/materialize.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='/css/ukulima_funds.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='/css/m_icons.css') }}">
    <link rel="manifest" href="../static/js/manifest.json">

    <script type="text/javascript" src="{{ url_for('static', filename='/js/jquery-3.6.1.min.js') }}"></script>

    <!--IOS support-->
    <link rel="apple-touch-icon" href="../static/images/pngwing.com.png">
    <meta name="apple-web-app-status-bar" content="#00b0ff">
</head>
<body>
{#navbar#}
<nav class="nav-wrapper green lighten-2 hide-on-med-and-down hide-on-small-and-down">
    <a href="#" class="sidenav-trigger" data-target="mobile_links">
        <i class="material-icons">menu</i>
    </a>
    <a href="{{ url_for('user_homepage') }}" class="brand-logo">Habahaba Ukulima</a>
    <ul class="right hide-on-med-and-down">
        <li><a href="{{ url_for('ukulima') }}">Ukulima wallet</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Services</a></li>
        <li><a href="{{ url_for('user_logout') }}">Logout</a></li>
    </ul>
</nav>

<ul class="sidenav" id="mobile_links">
    <div class="nav_container"
         style="height: 100vw; display: flex; flex-direction: column; justify-content: space-between">
        <ul class="top">
            <li><a href="{{ url_for('ukulima') }}">Ukulima wallet</a></li>
            <li><a href="#">Services</a></li>
            <li><a href="#">About</a></li>
        </ul>
        <ul class="logout">
            <li><a href="{{ url_for('user_logout') }}">Logout</a></li>
        </ul>
    </div>
</ul>
<a href="{{ url_for('ukulima') }}" class="btn-floating waves-effect waves-light {#blue lighten-3#} hide-on-large-only"
   id="back_button" style="background-color: transparent;">
    <ion-icon name="arrow-back-outline" class="back_icon"></ion-icon>
</a>

<div class="section1">
    {#    <h2 style="text-align: center">Funds</h2>#}
    <h2 style="text-align: center">Deposit</h2>
    <div class="row" id="icon_container">
        <ion-icon name="card-outline" class="target_icon"></ion-icon>
    </div>
    <div class="fund_buttons">
        {#        modal triggers#}
        {#                <button class="add_funds btn">Add Funds</button>#}
        <button class="redeem_voucher btn">Redeem Item</button>
    </div>
</div>
<br>
{% block content %}
    <div class="row">
        {% include 'includes/_flashmsg.html' %}
    </div>
    <ul class="tabs" id="tabs-swipe-demo">
        <li><a href="#test-swipe-1">Slide 1</a></li>
        <li><a href="#test-swipe-2">Slide 2</a></li>
    </ul>
    <div class="section2 col s12" id="test-swipe-1">


        <h4 class="center-align black-text">Deposit to...</h4>
        <ul class="collection collapsible black-text">

            {% for partner in partners %}
                <li class="collection-item avatar">
                    {#                    <div class="collapsible-header"></div>#}
                    {#                <img src="images/yuna.jpg" alt="" class="circle">#}
                    <ion-icon name="people-outline" class="circle" style="border: 3px solid white;"></ion-icon>
                    <span class="title" id="v_name"><b>{{ partner['vendor_name'] }}</b></span>
                    <p class="black-text">{{ partner['org_name'] }}
                        <br>
                        {{ partner['payment_for'] }}
                        <br>
                        <b>Balance: ksh{{ partner['saving_target'] - partner['amount_sent'] }}</b>
                    </p>
                    <div class="collapsible-header" style="background: transparent">
                        <a href="#!" class="secondary-content"><i class="material-icons">menu</i></a>
                    </div>
                    {#                    ============================================================================================#}
                    <div class="collapsible-body">
                        <form action="{{ url_for('ukulima_funds') }}" method="post">
                            <label for="defaults"></label>
                            {#                        vendor#}

                            <input type="text" name="payment_id" id="defaults" value="{{ partner['payment_id'] }}"
                                   readonly hidden>
                            <input type="text" name="vendor_id" id="defaults" value="{{ partner['vendor_id'] }}"
                                   readonly hidden>
                            <input type="text" name="vendor_name" id="defaults" value="{{ partner['vendor_name'] }}"
                                   readonly hidden>
                            <input type="text" name="vendor_email" id="defaults" value="{{ partner['vendor_email'] }}"
                                   readonly hidden>
                            <input type="text" name="vendor_phone" id="defaults" value="{{ partner['vendor_phone'] }}"
                                   readonly hidden>
                            <input type="text" name="vendor_org" id="defaults" value="{{ partner['org_name'] }}"
                                   readonly
                                   hidden>
                            <input type="text" name="payment_method" id="defaults"
                                   value="{{ partner['payment_method'] }}"
                                   readonly hidden>
                            <input type="text" name="acc_number" id="defaults" value="{{ partner['acc_no'] }}"
                                   readonly hidden>
                            <input type="text" name="vendor_crop" id="defaults" value="{{ partner['vendor_crop'] }}"
                                   readonly hidden>
                            <input type="text" name="payment_for" id="defaults" value="{{ partner['payment_for'] }}"
                                   readonly hidden>
                            <input type="text" name="saving_target" id="defaults" value="{{ partner['saving_target'] }}"
                                   readonly hidden>
                            {#                        user#}
                            <input type="text" name="client_id" id="defaults" value="{{ partner['sender_id'] }}"
                                   readonly hidden>
                            <input type="text" name="client_name" id="defaults"
                                   value="{{ session['f_name'] }} {{ session['l_name'] }}" readonly hidden>
                            <input type="text" name="client_email" id="defaults" value="{{ session['email'] }}" readonly
                                   hidden>
                            <input type="text" name="client_phone" id="defaults" value="{{ session['phone_no'] }}"
                                   readonly
                                   hidden>

                            <input type="text" name="amount_sent" id="defaults" value="{{ partner['amount_sent'] }}"
                                   readonly hidden>


                            <div class="row">
                                <div class="input-field col s12 white-text">
                                    {#                                tashwishi on required#}
                                    <input type="text" name="amount" id="amount" class="validate white-text" required>
                                    <label class="white-text" for="amount">Amount</label>
                                </div>
                            </div>
                            <div class="row" style="display: flex; justify-content: center">
                                <button type="submit" class="btn waves-light waves-effect white black-text">Submit
                                </button>
                            </div>
                        </form>
                    </div>
                </li>
            {% endfor %}
        </ul>
    </div>

    <div class="section3 col s12" id="test-swipe-2">

    </div>
{% endblock %}

{#[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[[JAVASCRIPT]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]]#}
{#ionicons#}
<script type="module" src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.esm.js"></script>
<script nomodule src="https://unpkg.com/ionicons@5.5.2/dist/ionicons/ionicons.js"></script>
<script type="text/javascript" src="{{ url_for('static', filename='/js/materialize.min.js') }}"></script>
{#link to app.js for service worker#}
<script src="../static/js/app.js"></script>
<script>
    //stop auto submit on reload
    if (window.history.replaceState) {
        window.history.replaceState(null, null, window.location.href);
    }
    //sidenav
    $(document).ready(function () {
        $('.sidenav').sidenav();
    });

    //Dropdown
    $(document).ready(function () {
        $('select').formSelect()

        //tabs
        $('.tabs').tabs();

    });
    //collapsible
    document.addEventListener('DOMContentLoaded', function () {
        let elems = document.querySelectorAll('.collapsible');
        let instances = M.Collapsible.init(elems, {
            inDuration: 300
        });
    });

</script>

</body>
</html>